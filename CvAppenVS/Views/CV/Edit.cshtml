@using CvAppen.Web.ViewModels

@model CvAppen.Web.ViewModels.CvViewModel

<h2 class="mb-4">Redigera CV</h2>

<form asp-action="Edit" method="post" class="col-md-6">

	<input type="hidden" asp-for="Id" />

	<div class="mb-3">
		<label class="form-label">Presentation</label>
		<input asp-for="Presentation" class="form-control" />
		<span asp-validation-for="Presentation"></span>
	</div>

	<div class="mb-3">
		<label class="form-label">Telefonnummer</label>
		<textarea asp-for="PhoneNumber" class="form-control" rows="4"></textarea>
		<span asp-validation-for="PhoneNumber" class="text-danger"></span>
	</div>

	@* För kompetenslistan *@
	<div class="mb-3" id="competences-container">
		<label class="form-label">Kompetenser</label>
		@for (int i = 0; i < Model.Competences.Count; i++)
		{
			<div class="border p-2 mb-2">
			<input type="hidden" asp-for="Competences[i].Id" />
			<input asp-for="Competences[i].Title" placeholder="Kompetens" class="form-control mb-1" />
@* 			<span asp-validation-for="Competences[i]" class="text-danger"></span>
 *@			<button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()">×</button>
			</div>
		}

		<button type="button" class="btn btn-sm btn-outline-primary" onclick="addCompetence()"> Lägg till kompetens</button>
		</div>
		@* Javascript-delen *@

		<script>
			function addCompetence() {
			const container = document.getElementById('competences-container');
			const index = container.querySelectorAll('.border').length;
			const html =
			`<div class="border p-2 mb-2">
			<input name="Competences[${index}].Title" placeholder="Kompetens" class="form-control mb-1" />
			<button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()">× Ta bort</button>

			</div>`;
			container.insertAdjacentHTML('beforeend', html);

			}

		</script>


		@* 	För utbildnings-listan *@
		<div class="mb-3" id="educations-container">
			<label class="form-label">Utbildningar</label>

			@for (int i = 0; i < Model.Educations.Count; i++)
			{
				<div class="border p-2 mb-2">
					<input asp-for="Educations[i].Name" placeholder="Utbildning" class="form-control mb-1" />
					<input asp-for="Educations[i].School" placeholder="Skola" class="form-control mb-1" />
					<input asp-for="Educations[i].From" type="date" class="form-control mb-1" />
					<input asp-for="Educations[i].To" type="date" class="form-control mb-1" />
					<button type="button" class="btn btn-sm btn-danger align-self-start mt-1" onclick="this.parentElement.remove()">× Ta bort</button>

				</div>
			}


			<button type="button" class="btn btn-sm btn-outline-primary" onclick="addEducation()"> Lägg till utbildning</button>

		</div>


		<script>
			function addEducation() {
				const container = document.getElementById('educations-container');
					const index = container.querySelectorAll('.border').length;
			const html = `
			<div class="border p-2 mb-2">
				<input name="Educations[${index}].Name" placeholder="Utbildning" class="form-control mb-1" />
				<input name="Educations[${index}].School" placeholder="Skola" class="form-control mb-1" />
				<input type="date" name="Educations[${index}].From" class="form-control mb-1" />
				<input type="date" name="Educations[${index}].To" class="form-control mb-1" />
			</div>`;
			container.insertAdjacentHTML('beforeend', html);
			}
		</script>

		@* 	För tidigare erfarenhets-listan *@
		<div class="mb-3" id="earlierexperiences-container">
			<label class="form-label">Erfarenheter</label>

			@for (int i = 0; i < Model.EarlierExperiences.Count; i++)
			{
				<div class="border p-2 mb-2">
					<input asp-for="EarlierExperiences[i].Title" placeholder="Titel" class="form-control mb-1" />
					<input asp-for="EarlierExperiences[i].Company" placeholder="Företag" class="form-control mb-1" />
					<input asp-for="EarlierExperiences[i].Description" placeholder="Beskrivning" class="form-control mb-1" />

					<input asp-for="EarlierExperiences[i].From" type="date" class="form-control mb-1" />
					<input asp-for="EarlierExperiences[i].To" type="date" class="form-control mb-1" />
					<button type="button" class="btn btn-sm btn-danger align-self-start mt-1" onclick="this.parentElement.remove()">× Ta bort</button>

				</div>
			}
			

			<button type="button" class="btn btn-sm btn-outline-primary" onclick="addEarlierExperience()"> Lägg till erfarenhet</button>

		</div>

		<script>
			function addEarlierExperience() {
				const container = document.getElementById('earlierexperiences-container');
					const index = container.querySelectorAll('.border').length;
			const html = `
			<div class="border p-2 mb-2">
				<input name="EarlierExperiences[${index}].Title" placeholder="Titel" class="form-control mb-1" />
				<input name="EarlierExperiences[${index}].Company" placeholder="Företag" class="form-control mb-1" />
								<input name="EarlierExperiences[${index}].Description" placeholder="Beskrivning" class="form-control mb-1" />

				<input type="date" name="EarlierExperiences[${index}].From" class="form-control mb-1" />
				<input type="date" name="EarlierExperiences[${index}].To" class="form-control mb-1" />
			</div>`;
			container.insertAdjacentHTML('beforeend', html);
			}
		</script>

		<button type="submit" class="btn btn-dark btn-sm">Spara</button>

</form>
